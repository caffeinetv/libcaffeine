version: '{build}-{branch}'
platform: x64

matrix:
  fast_finish: true

environment:
  global: 
    CMAKE_SYSTEM_VERSION: 10.0.17134.0
    CURL_VERSION: 7.56.1
    LLVM_VERSION: 8.0.0
    LIBYUV_GIT: "https://chromium.googlesource.com/libyuv/libyuv"
    
  matrix:  
  - APPVEYOR_BUILD_WORKER_IMAGE: "Visual Studio 2017"
    CMAKE_GENERATOR: "Visual Studio 15 2017 Win64"
    CMAKE_TOOLSET: "LLVM"
    WEBRTC_BIN_URL: "https://github.com/caffeinetv/webrtc/releases/download/v70/webrtc_x64.7z"
    WEBRTC_SRC_URL: "https://github.com/caffeinetv/webrtc/archive/v70.zip"
    WEBRTC_SRC_PATH_SUFFIX: "\\webrtc-70"
    OBS_DEPENDENCIES_URL: "https://obsproject.com/downloads/dependencies2017.zip"
    OBS_DEPENDENCIES_ARCH: "win64"

# Caching
cache:
  - .cache/webrtc_bin.7z
  - .cache/webrtc_src.zip
  - .cache/obs_deps.zip

# Scripts
install:
- cmd: ci/win/install.cmd

build_script:
- cmd: ci/win/build.cmd

after_build:
- cmd: ci/win/package.cmd

test: off
